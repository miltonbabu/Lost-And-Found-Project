{% extends "base.html" %}

{% block title %}{{ item.item_name }} - Lost Item Details{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ” Lost Item Details</h2>
</div>

<div class="card">
    <div style="margin-bottom: 20px; text-align: center;">
        {% if item.image_filename %}
            <img src="{{ url_for('uploaded_file', filename=item.image_filename) }}" 
                 style="max-width: 100%; max-height: 300px; object-fit: contain; border-radius: 8px; box-shadow: var(--shadow-md);" 
                 alt="{{ item.item_name }}">
        {% else %}
            <div style="background-color: #f1f5f9; padding: 40px; border-radius: 8px;">
                <span style="font-size: 4rem; margin: 0;">ğŸ“·</span>
                <p style="margin-top: 10px; color: var(--text-secondary);">No image available for this item</p>
            </div>
        {% endif %}
    </div>
    
    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
        <div>
            <h3 style="color: #2c3e50; margin-top: 0;">{{ item.item_name }}</h3>
            
            <div style="margin-bottom: 20px;">
                <span class="status-badge status-{{ item.status }}">{{ item.status }}</span>
                <small style="margin-left: 10px; color: #666;">
                    Reported on {{ item.created_at[:10] }} at {{ item.created_at[11:16] }}
                </small>
            </div>
            
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 10px 0; font-weight: bold; width: 150px;">Category:</td>
                    <td style="padding: 10px 0;">{{ item.category }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 10px 0; font-weight: bold;">Date Lost:</td>
                    <td style="padding: 10px 0;">{{ item.lost_date }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 10px 0; font-weight: bold;">Location Lost:</td>
                    <td style="padding: 10px 0;">{{ item.location }}</td>
                </tr>
                {% if item.description %}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 10px 0; font-weight: bold; vertical-align: top;">Description:</td>
                    <td style="padding: 10px 0; line-height: 1.5;">{{ item.description }}</td>
                </tr>
                {% endif %}
            </table>
        </div>
        
        <div>
            <div class="card" style="background-color: #f8f9fa;">
                <h4 style="margin-top: 0;">ğŸ“ Contact Information</h4>
                <p><strong>Name:</strong> {{ item.contact_name }}</p>
                {% if item.contact_email %}
                <p><strong>Email:</strong> {{ item.contact_email }}</p>
                {% endif %}
                {% if item.contact_phone %}
                <p><strong>Phone:</strong> {{ item.contact_phone }}</p>
                {% endif %}
            </div>
            
            {% if item.status == 'unclaimed' %}
            <div style="text-align: center; margin-top: 20px;">
                <a href="{{ url_for('claim_lost_item', item_id=item.id) }}" class="btn btn-success" style="width: 100%;">
                    ğŸ† Claim This Item
                </a>
            </div>
            {% endif %}
        </div>
    </div>
    
    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
            <a href="{{ url_for('list_lost') }}" class="btn">â† Back to Lost Items</a>
            <a href="{{ url_for('index') }}" class="btn">Home</a>
            <!-- Delete button (only for admin or item reporter) -->
            {% if session and ('user_role' in session and session.user_role == 'admin') or ('user_id' in session and session.user_id == item.user_id) %}
            <form method="POST" action="{{ url_for('delete_lost', item_id=item.id) }}" style="margin: 0;">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this item? This action cannot be undone.')">
                    ğŸ—‘ï¸ Delete Item
                </button>
            </form>
            {% endif %}
        </div>
    </div>
</div>

<div class="card" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
    <h4 style="margin-top: 0; color: #856404;">ğŸ“‹ Important Notice</h4>
    <p style="margin: 0; color: #856404;">
        Please verify this is your item before claiming. False claims may result in disciplinary action. 
        You will need to provide proof of ownership to collect the item.
    </p>
</div>
{% endblock %}