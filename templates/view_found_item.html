{% extends "base.html" %} {% block title %}{{ item.item_name }} - Found Item
Details{% endblock %} {% block content %}
<div class="card">
  <h2>ğŸ“¦ Found Item Details</h2>
</div>

<div class="card">
  <div style="margin-bottom: 20px; text-align: center">
    {% if item.image_filename %}
    <img
      src="{{ url_for('uploaded_file', filename=item.image_filename) }}"
      style="
        max-width: 100%;
        max-height: 300px;
        object-fit: contain;
        border-radius: 8px;
        box-shadow: var(--shadow-md);
      "
      alt="{{ item.item_name }}"
    />
    {% else %}
    <div style="background-color: #f1f5f9; padding: 40px; border-radius: 8px">
      <span style="font-size: 4rem; margin: 0">ğŸ“·</span>
      <p style="margin-top: 10px; color: var(--text-secondary)">
        No image available for this item
      </p>
    </div>
    {% endif %}
  </div>

  <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px">
    <div>
      <h3 style="color: #2c3e50; margin-top: 0">{{ item.item_name }}</h3>

      <div style="margin-bottom: 20px">
        <span class="status-badge status-{{ item.status }}"
          >{{ item.status }}</span
        >
        <small style="margin-left: 10px; color: #666">
          Reported on {{ item.created_at[:10] }} at {{ item.created_at[11:16] }}
        </small>
      </div>

      <table style="width: 100%; border-collapse: collapse">
        <tr style="border-bottom: 1px solid #eee">
          <td style="padding: 10px 0; font-weight: bold; width: 150px">
            Category:
          </td>
          <td style="padding: 10px 0">{{ item.category }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #eee">
          <td style="padding: 10px 0; font-weight: bold">Date Found:</td>
          <td style="padding: 10px 0">{{ item.found_date }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #eee">
          <td style="padding: 10px 0; font-weight: bold">Location Found:</td>
          <td style="padding: 10px 0">{{ item.location }}</td>
        </tr>
        {% if item.description %}
        <tr style="border-bottom: 1px solid #eee">
          <td style="padding: 10px 0; font-weight: bold; vertical-align: top">
            Description:
          </td>
          <td style="padding: 10px 0; line-height: 1.5">
            {{ item.description }}
          </td>
        </tr>
        {% endif %}
      </table>
    </div>

    <div>
      <div class="card" style="background-color: #f8f9fa">
        <h4 style="margin-top: 0">ğŸ“ Finder's Contact</h4>
        <p><strong>Name:</strong> {{ item.contact_name }}</p>
        {% if item.contact_email %}
        <p><strong>Email:</strong> {{ item.contact_email }}</p>
        {% endif %} {% if item.contact_phone %}
        <p><strong>Phone:</strong> {{ item.contact_phone }}</p>
        {% endif %}
        <p
          style="
            font-size: 0.9em;
            color: #666;
            font-style: italic;
            margin-top: 10px;
          "
        >
          Contact information will be shared with verified owner
        </p>
      </div>

      {% if item.status == 'unclaimed' %}
      <div style="text-align: center; margin-top: 20px">
        <a
          href="{{ url_for('claim_found_item', item_id=item.id) }}"
          class="btn btn-success"
          style="width: 100%"
        >
          ğŸ† Claim This Item
        </a>
      </div>
      {% endif %}
    </div>
  </div>

  <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee">
    <div
      style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap"
    >
      <a href="{{ url_for('list_found') }}" class="btn"
        >â† Back to Found Items</a
      >
      <a href="{{ url_for('index') }}" class="btn">Home</a>
      <!-- Delete button (only for admin or item reporter) -->
      {% if session and ('user_role' in session and session.user_role ==
      'admin') or ('user_id' in session and session.user_id == item.user_id) %}
      <form
        method="POST"
        action="{{ url_for('delete_found', item_id=item.id) }}"
        style="margin: 0"
      >
        <button
          type="submit"
          class="btn btn-danger"
          onclick="return confirm('Are you sure you want to delete this item? This action cannot be undone.')"
        >
          ğŸ—‘ï¸ Delete Item
        </button>
      </form>
      {% endif %}
    </div>
  </div>
</div>

<div
  class="card"
  style="background-color: #d1ecf1; border-left: 4px solid #0c5460"
>
  <h4 style="margin-top: 0; color: #0c5460">ğŸ” Claim Process</h4>
  <p style="margin: 0; color: #0c5460">
    To claim this item, you must provide sufficient proof of ownership. The
    finder will be contacted to verify your claim before the item is released.
    False claims will be reported to authorities.
  </p>
</div>
{% endblock %}
